<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday ğŸŒ™âœ¨</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body{
  margin:0;
  font-family:'Poppins',sans-serif;
  overflow:hidden;
  background:#0f0f14;
  color:white;
  text-align:center;
}

section{
  position:absolute;
  width:100%;
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  transition:0.8s;
}

.hidden{opacity:0;pointer-events:none;}
.visible{opacity:1;pointer-events:auto;}

button{
  padding:12px 25px;
  border:none;
  border-radius:30px;
  background:#ff4da6;
  color:white;
  font-size:16px;
  cursor:pointer;
  margin:8px;
  transition:0.3s;
}
button:hover{transform:scale(1.05);}

.country-btn{
  width:200px;
}

.note{
  max-width:600px;
  font-size:18px;
  line-height:1.6;
  margin-top:20px;
}

.gold{
  background:linear-gradient(90deg,#fff,#ffd700,#fff);
  background-size:200%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation:shine 3s linear infinite;
}
@keyframes shine{
  from{background-position:0%}
  to{background-position:200%}
}

.candle{font-size:45px;margin-top:20px;}
.flame{animation:flicker 0.2s infinite alternate;}
@keyframes flicker{from{transform:scale(1);}to{transform:scale(1.2);}}

.plane{
  position:absolute;
  font-size:35px;
  top:50%;
  left:-10%;
  transition:2s cubic-bezier(.68,-0.55,.27,1.55);
}

.arc{
  position:absolute;
  width:80%;
  height:50%;
  border-top:2px dashed rgba(255,255,255,0.5);
  border-radius:50%;
  top:30%;
  left:10%;
  opacity:0;
}

.petal{
  position:fixed;
  top:-10px;
  font-size:18px;
  animation:fall linear infinite;
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg);}
}
</style>
</head>
<body>

<section id="intro" class="visible">
  <h1>ğŸ¬ A Cinematic Surprise Awaits...</h1>
  <button onclick="startGame()">Begin ğŸŒ</button>
</section>

<section id="countries" class="hidden">
  <h2>Choose Your Destination âœˆï¸</h2>
  <button class="country-btn" onclick="travel('india')">ğŸ‡®ğŸ‡³ India</button>
  <button class="country-btn" onclick="travel('saudi')">ğŸ‡¸ğŸ‡¦ Saudi Arabia</button>
  <button class="country-btn" onclick="travel('japan')">ğŸ‡¯ğŸ‡µ Japan</button>
  <button class="country-btn" onclick="travel('korea')">ğŸ‡°ğŸ‡· South Korea</button>
</section>

<section id="ending" class="hidden">
  <div class="arc" id="arc"></div>
  <div class="plane" id="plane">âœˆï¸</div>
  <div class="note" id="note"></div>
  <div class="candle">ğŸ•¯ï¸ <span class="flame">ğŸ”¥</span></div>
  <button onclick="goBack()">â¬… Back</button>
</section>

<audio id="jetSound" src="https://cdn.pixabay.com/audio/2022/03/15/audio_2e3bca0b3f.mp3"></audio>

<script>
function startGame(){
  intro.classList.replace("visible","hidden");
  countries.classList.replace("hidden","visible");
}

const notes={
india:`Happy Birthday ğŸŒ™âœ¨<br><br>
Soft mornings, warm laughter & magical moments for <span class="gold">Nimra ğŸ’•</span> ğŸŒ¸ğŸ«ğŸ’–ğŸŒ¹<br><br>
à¤œà¤¨à¥à¤®à¤¦à¤¿à¤¨ à¤®à¥à¤¬à¤¾à¤°à¤• à¤¹à¥‹ ğŸ‰`,
saudi:`Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯ ğŸ‰ğŸŒ¸ğŸ« <span class="gold">Nimra ğŸ’•</span>`,
japan:`ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã† ğŸ‰ğŸŒ¸ğŸ« <span class="gold">Nimra ğŸ’•</span>`,
korea:`ìƒì¼ ì¶•í•˜í•´ìš” ğŸ‰ğŸŒ¸ğŸ« <span class="gold">Nimra ğŸ’•</span>`
};

function travel(country){
  countries.classList.replace("visible","hidden");
  ending.classList.replace("hidden","visible");

  jetSound.play();

  const plane=document.getElementById("plane");
  const arc=document.getElementById("arc");

  arc.style.opacity="1";
  plane.style.left="80%";
  plane.style.top="30%";

  setTimeout(()=>{
    document.getElementById("note").innerHTML=notes[country];
  },2000);
}

function goBack(){
  ending.classList.replace("visible","hidden");
  countries.classList.replace("hidden","visible");
  plane.style.left="-10%";
  arc.style.opacity="0";
}

/* continuous petals */
setInterval(()=>{
  let petal=document.createElement("div");
  petal.className="petal";
  petal.innerHTML="ğŸŒ¹";
  petal.style.left=Math.random()*100+"vw";
  petal.style.animationDuration=(5+Math.random()*5)+"s";
  document.body.appendChild(petal);
  setTimeout(()=>petal.remove(),10000);
},400);

/* mic candle blow */
let audioContext,analyser,dataArray;
document.addEventListener("click",async()=>{
  try{
    const stream=await navigator.mediaDevices.getUserMedia({audio:true});
    audioContext=new(window.AudioContext||window.webkitAudioContext)();
    analyser=audioContext.createAnalyser();
    const mic=audioContext.createMediaStreamSource(stream);
    mic.connect(analyser);
    analyser.fftSize=256;
    dataArray=new Uint8Array(analyser.frequencyBinCount);
    detectBlow();
  }catch(e){}
},{once:true});

function detectBlow(){
  analyser.getByteFrequencyData(dataArray);
  let volume=dataArray.reduce((a,b)=>a+b)/dataArray.length;
  if(volume>45){
    document.querySelector(".flame").style.opacity="0";
    confetti({particleCount:200,spread:100,origin:{y:0.6}});
  }
  requestAnimationFrame(detectBlow);
}
</script>

</body>
</html>
